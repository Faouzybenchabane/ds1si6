{% extends "base.html.twig" %}
{% block style %}<link href="css/style-signin.css" rel="stylesheet"> {% endblock %}
{% block title %} {{ parent() }} Gestion des utilisateur {% endblock %}
{% block contenu %} 

<div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading">Liste des utilisateurs</div>
    <!-- Table -->
    <div class="table-responsive">
    <table class="table table-hover table-striped">
        <tr><th>Email</th><th>Nom</th><th>Prénom</th><th>Rôle</th><th></th><th></th></tr>
        {% for u in liste %}
        <tr>
            <td>
                {{u.email}}
            </td>
            <td>
                {{u.nom}}
            </td>
            <td>
                {{u.prenom}}
            </td>
            <td>
                {{u.libellerole}}
            </td>
            <td> 
                <div class="btn-group btn-group-lg"><a href="index.php?page=modifutilisateur&email={{u.email}}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></div>
            </td>
            <td>
                <div class="btn-group btn-group-lg"><a href="#"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></div></td>
        </tr> 
        {% endfor %}
    </table>
    </div>
</div>
        
    <div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading">Ajoutez un utilisateur</div>    
        {% if form.valide is defined %} 
    {% if form.valide == true %}
       <h1 class="h3 mb-3 font-weight-normal">Ajout de l'utilisateur réussie</h1>
       <h1 class="h3 mb-3 font-weight-normal">Voici son identifiant : {{form.email}}</h1>
        {% if form.role == 1 %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un administrateur du site</h1>
        {% else %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un client du site </h1>
        {% endif %}
    {% else %}
        <h1 class="h3 mb-3 font-weight-normal">Echec de l'ajout</h1> 
        <h1 class="h3 mb-3 font-weight-normal">Erreur : {{form.message}}</h1>
        <h1 class="h3 mb-3 font-weight-normal"><a href="index.php?page=inscrire">Retourner sur la page d'inscription</a></h1>    
    {% endif %} {% if form.valide == true %}
       <h1 class="h3 mb-3 font-weight-normal">Ajout de l'utilisateur réussie</h1>
       <h1 class="h3 mb-3 font-weight-normal">Voici son identifiant : {{form.email}}</h1>
        {% if form.role == 1 %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un administrateur du site</h1>
        {% else %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un client du site </h1>
        {% endif %}
    {% else %}
        <h1 class="h3 mb-3 font-weight-normal">Echec de l'ajout</h1> 
        <h1 class="h3 mb-3 font-weight-normal">Erreur : {{form.message}}</h1>
        <h1 class="h3 mb-3 font-weight-normal"><a href="index.php?page=inscrire">Retourner sur la page d'inscription</a></h1>    
    {% endif %} 
{% else %}  
 <form class="form-signin" action="index.php?page=inscrire" method="post" 
enctype="application/x-www-form-urlencoded">
      
      <label for="inputEmail" class="sr-only">Email:</label> 
      <input type="email" id="inputEmail" name="inputEmail" class="form-control" placeholder="Email" required autofocus>
      <label for="inputPassword" class="sr-only">Mot de passe:</label>
      <input type="password" id="inputPassword" name="inputPassword" class="form-control" placeholder="Mot de passe" required>{% if form.valide == true %}
       <h1 class="h3 mb-3 font-weight-normal">Ajout de l'utilisateur réussie</h1>
       <h1 class="h3 mb-3 font-weight-normal">Voici son identifiant : {{form.email}}</h1>
        {% if form.role == 1 %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un administrateur du site</h1>
        {% else %}
           <h1 class="h3 mb-3 font-weight-normal">C'est un client du site </h1>
        {% endif %}
    {% else %}
        <h1 class="h3 mb-3 font-weight-normal">Echec de l'ajout</h1> 
        <h1 class="h3 mb-3 font-weight-normal">Erreur : {{form.message}}</h1>
        <h1 class="h3 mb-3 font-weight-normal"><a href="index.php?page=inscrire">Retourner sur la page d'inscription</a></h1>    
    {% endif %} 
      <label for="inputPassword2" class="sr-only">Mot de passe:</label>
      <input type="password" id="inputPassword2" name="inputPassword2" class="form-control" placeholder="Confirmation mot de passe" required>
      <label for="nom" class="sr-only">Nom:</label>
      <input type="nom" id="nom" name="nom" class="form-control" placeholder="Nom" required>
      <label for="prenom" class="sr-only">Prenom:</label>
      <input type="prenom" id="prenom" name="prenom" class="form-control" placeholder="Prénom" required>
      <select class="form-control" name="role">
      <option value="1">Administrateur</option>
      <option value="2">Client</option>
      </select>
      <button class="btn btn-lg btn-primary btn-block" type="submit" name="btInscrire">Ajout</button>
 </form>
</div>
{% endif %}  
{% endblock %}